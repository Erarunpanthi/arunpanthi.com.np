<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Irrigation Engineering MCQ Test</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="Test.css">
   
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-drafting-compass"></i> Engineering Drawing MCQ Test</h1>
        <div id="start-message">
            <p>Welcome to the Irrigation Engineering  assessment!</p>
            <p>You will have <span class="highlight">120 minutes</span> to complete all questions.</p>
            <p>This test contains <strong>more than 160 multiple-choice questions</strong> covering various aspects of  Irrigation engineering .</p>
            <button id="start-button" onclick="startTest()">Begin Test <i class="fas fa-arrow-right"></i></button>
        </div>
        <div id="test-content">
            <div id="timer">
                <i class="fas fa-clock"></i> Time Remaining: 120:00
            </div>
            <div id="stats">
                <div class="stat-box">
                    <h3><i class="fas fa-question-circle"></i> Total Questions</h3>
                    <div class="stat-value" id="total-questions">40</div>
                </div>
                <div class="stat-box">
                    <h3><i class="fas fa-check-circle"></i> Attempted</h3>
                    <div class="stat-value" id="attempted">0</div>
                </div>
                <div class="stat-box">
                    <h3><i class="fas fa-exclamation-circle"></i> Not Attempted</h3>
                    <div class="stat-value" id="not-attempted">40</div>
                </div>
            </div>
            <form id="quiz-form">
                <!-- Questions will be dynamically inserted here -->
            </form>
            <div class="button-container">
                <button type="button" id="back-button" onclick="showPreviousQuestions()" style="display: none;">
                    <i class="fas fa-arrow-left"></i> Back
                </button>
                <button type="button" id="next-button" onclick="showNextQuestions()">
                    Next <i class="fas fa-arrow-right"></i>
                </button>
            </div>
            <div id="result" style="display: none;">
                <h2>Test Results</h2>
                <div class="progress-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
                <div class="score-display" id="score">0/0</div>
                <p>You scored <span class="highlight" id="percentage">0</span>%</p>
                <div class="answer-details" id="answer-details"></div>
                <button id="submit-button" onclick="location.reload()">
                    <i class="fas fa-redo"></i> Take Test Again
                </button>
            </div>
        </div>
    </div>

    <script>
        // Questions data (just 2 sample questions - add the remaining 38 following the same format)
        const questionsData = [
            
    {
        "question": "Capacity of an irrigation channel is fixed based on:",
        "options": [
            "Cultivable command area and water transmission losses",
            "Duty of water",
            "Time factor",
            "All of the above"
        ],
        "answer": "All of the above"
    },
    {
        "question": "Determine the volume of water stored in unit area if unit weight of water is 9.8 KN/mÂ³ , dry unit of soil is 17 KN/mÂ³, field capacity (F) is 2.35 mÂ²,  and depth of root zone of the plant is 9 m.",
        "options": [
            "36.69 mÂ³",
            "36 mÂ³",
            "36.12 mÂ³",
            "36.25 mÂ³"
        ],
        "answer": "36.69 mÂ³"
    },
    {
        "question": "Find the duty of irrigation water required for rice transplantation, considering 18 days duration and 60 cm water depth, with 10 cm of rain being utilized and 25% losses in watercourses.",
        "options": [
            "233.28 hectares/cumec",
            "240  hectares/cumec",
            "230  hectares/cumec",
            "244.44  hectares/cumec"
        ],
        "answer": "233.28 hectares/cumec"
    },
    {
        "question": "Irrigation requirement depends on which of the following parameters?",
        "options": [
            "crop",
            "soil",
            "climate",
            "All of the above"
        ],
        "answer": "All of the above"
    },
    {
        "question": "The capacity of irrigation canal is determined by",
        "options": [
            "Kor water depth (Rabi)",
            "Kor water depth (Kharif)",
            "Average irrigation depth (Rabi)",
            "Average irrigation depth (Kharif)"
        ],
        "answer": "Kor water depth (Kharif)"
    },
    {
        "question": "The consumptive use of water for a crop",
        "options": [
            "Is measured as the volume of water per unit area",
            "Is measured as depth of water on irrigated area",
            "Supplied partly by precipitation and partly by irrigation",
            "All the above"
        ],
        "answer": "All the above"
    },
    {
        "question": "The kor depth for rice is 190 mm and kor period is 14 days. The outlet factor for this will be",
        "options": [
            "637 hectares/mÂ³/sec",
            "1172 hectares/mÂ³/sec",
            "972 hectares/mÂ³/sec",
            "837 hectares/mÂ³/sec"
        ],
        "answer": "637 hectares/mÂ³/sec"
    },
    {
        "question": "The mean depth of water is 1.5 cm and the mean deviation from the mean is 0.1 cm. Determine its distribution efficiency",
        "options": [
            "87",
            "83",
            "90",
            "93"
        ],
        "answer": "93"
    },
    {
        "question": "Water available for plants is.",
        "options": [
            "FC-PWP",
            "FC",
            "PWP",
            "RWW-PWP"
        ],
        "answer": "FC-PWP"
    },
    {
        "question": "Water in canal is based on",
        "options": [
            "crop water requirement",
            "net irrigation requirement",
            "gross irrigation requirement",
            "transpiration"
        ],
        "answer": "gross irrigation requirement"
    }

       ];

        // Add IDs dynamically to all questions
        const questions = questionsData.map((q, index) => ({
            id: index + 1,
            question: q.question,
            options: q.options,
            answer: q.answer
        }));

        let currentIndex = 0;
        let userAnswers = {};
        let timer;
        let timeRemaining = 120 * 60; // 120 minutes in seconds
        const form = document.getElementById('quiz-form');
        const startMessage = document.getElementById('start-message');
        const testContent = document.getElementById('test-content');

        // Function to start the test
        function startTest() {
            startMessage.style.display = 'none';
            testContent.style.display = 'block';
            renderQuestions();
            startTimer();
        }

        // Function to render questions
        function renderQuestions() {
            form.innerHTML = '';
            for (let i = currentIndex; i < currentIndex + 3 && i < questions.length; i++) {
                const question = questions[i];
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question floating';
                questionDiv.id = `question-${question.id}`;
                questionDiv.innerHTML = `
                    <p><i class="fas fa-question-circle" style="color: #4361ee; margin-right: 10px;"></i>${question.question}</p>
                    <div class="options-container">
                        ${question.options.map(option => `
                            <label>
                                <input type="radio" name="q${question.id}" value="${option}" onchange="lockOption(this)"
                                    ${userAnswers[question.id] === option ? 'checked' : ''}>
                                ${option}
                            </label>
                        `).join('')}
                    </div>
                `;
                form.appendChild(questionDiv);
            }

            document.getElementById('back-button').style.display = currentIndex === 0 ? 'none' : 'inline-flex';
            updateStats();
        }

        // Function to lock options once selected
        function lockOption(option) {
            const questionId = option.name.replace('q', '');
            userAnswers[questionId] = option.value;
            const questionDiv = option.closest('.question');
            const inputs = questionDiv.querySelectorAll('input');
            inputs.forEach(input => input.disabled = true);

            questionDiv.classList.remove('floating');
            questionDiv.style.borderLeft = '4px solid #4cc9f0';
            setTimeout(() => {
                questionDiv.style.borderLeft = '4px solid #4361ee';
            }, 500);

            updateStats();
        }

        // Function to show the next set of questions
        function showNextQuestions() {
            currentIndex += 3;
            if (currentIndex >= questions.length) {
                submitTest();
            } else {
                renderQuestions();
                window.scrollTo({
                    top: form.offsetTop - 20,
                    behavior: 'smooth'
                });
            }
        }

        // Function to show the previous set of questions
        function showPreviousQuestions() {
            currentIndex -= 3;
            if (currentIndex < 0) currentIndex = 0;
            renderQuestions();
            window.scrollTo({
                top: form.offsetTop - 20,
                behavior: 'smooth'
            });
        }

        // Function to update stats
        function updateStats() {
            const totalQuestions = questions.length;
            const attempted = Object.keys(userAnswers).length;
            const notAttempted = totalQuestions - attempted;

            document.getElementById('total-questions').textContent = totalQuestions;
            document.getElementById('attempted').textContent = attempted;
            document.getElementById('not-attempted').textContent = notAttempted;
        }

        // Function to start the timer
        function startTimer() {
            timer = setInterval(() => {
                timeRemaining--;
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    submitTest();
                }
                updateTimer();
            }, 1000);
        }

        // Function to update the timer display
        function updateTimer() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            const timerElement = document.getElementById('timer');
            timerElement.innerHTML = `<i class="fas fa-clock"></i> Time Remaining: ${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            if (timeRemaining <= 300) {
                timerElement.style.color = '#f72585';
                timerElement.style.animation = 'pulse 1s infinite';
            }
        }

        // Function to submit the test
        function submitTest() {
            clearInterval(timer);
            document.getElementById('next-button').style.display = 'none';
            document.getElementById('back-button').style.display = 'none';
            showResult();
        }

        // Function to calculate and display the result
        function showResult() {
            let score = 0;
            const answerDetails = [];

            questions.forEach(question => {
                const userAnswer = userAnswers[question.id];
                const isCorrect = userAnswer === question.answer;
                if (isCorrect) score++;

                answerDetails.push(`
                    <div class="answer-item ${isCorrect ? 'correct-answer' : 'incorrect-answer'}">
                        <p><strong>Question ${question.id}:</strong> ${question.question}</p>
                        <p><strong>Your Answer:</strong> <span class="${isCorrect ? 'correct' : 'incorrect'}">${userAnswer || 'Not answered'}</span></p>
                        <p><strong>Correct Answer:</strong> <span class="correct">${question.answer}</span></p>
                    </div>
                `);
            });

            const percentage = Math.round((score / questions.length) * 100);
            document.getElementById('score').textContent = `${score} / ${questions.length}`;
            document.getElementById('percentage').textContent = percentage;
            document.getElementById('progress-bar').style.width = `${percentage}%`;
            document.getElementById('answer-details').innerHTML = answerDetails.join('');
            document.getElementById('result').style.display = 'block';

            window.scrollTo({
                top: document.getElementById('result').offsetTop - 20,
                behavior: 'smooth'
            });

            if (percentage >= 70) {
                triggerConfetti();
            }
        }

        // Simple confetti effect
        function triggerConfetti() {
            const confettiCount = 100;
            const confettiContainer = document.createElement('div');
            confettiContainer.style.position = 'fixed';
            confettiContainer.style.top = '0';
            confettiContainer.style.left = '0';
            confettiContainer.style.width = '100%';
            confettiContainer.style.height = '100%';
            confettiContainer.style.pointerEvents = 'none';
            confettiContainer.style.zIndex = '1000';
            document.body.appendChild(confettiContainer);

            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.innerHTML = ['ðŸŽ‰', 'âœ¨', 'ðŸŽŠ', 'ðŸ†', 'ðŸ‘'][Math.floor(Math.random() * 5)];
                confetti.style.position = 'absolute';
                confetti.style.fontSize = `${Math.random() * 20 + 10}px`;
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.top = '-50px';
                confetti.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;
                confetti.style.opacity = Math.random();
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                confettiContainer.appendChild(confetti);

                const animation = confetti.animate([
                    { top: '-50px', opacity: 1 },
                    { top: '100vh', opacity: 0 }
                ], {
                    duration: Math.random() * 3000 + 2000,
                    easing: 'cubic-bezier(0.1, 0.8, 0.9, 1)'
                });

                animation.onfinish = () => {
                    confetti.remove();
                    if (i === confettiCount - 1) {
                        confettiContainer.remove();
                    }
                };
            }

            const style = document.createElement('style');
            style.textContent = `
                @keyframes fall {
                    to { transform: translateY(100vh) rotate(360deg); }
                }
            `;
            document.head.appendChild(style);
        }
    </script>
</body>
</html>
